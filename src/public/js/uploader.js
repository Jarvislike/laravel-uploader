/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */,
/* 1 */
/***/ function(module, exports) {

eval("var Uploader = function Uploader(container, options) {\n    if (typeof window.uploader_options === 'undefined') {\n        return console.error('Base uploader config \"window.uploader_options\" not found.');\n    }\n    options = options || {selectors: {}}\n\n    this.selectors = Object.assign({\n        picker: 'file-uploader-picker',\n        items: 'file-uploader-items',\n        item: 'file-uploader-item',\n        delete_btn: 'file-uploader-delete',\n        error: 'file-uploader-error',\n        progress_bar: 'file-uploader-progress-bar',\n    }, options.selectors);\n\n    this.container = document.querySelector(container);\n    this.maxItems = this.container.dataset.maxItems || 999;\n    this.multiple = this.container.hasAttribute('multiple');\n    this.itemsContainer = this.container.querySelector('.'+this.selectors.items);\n    this.picker = this.container.querySelector('.'+this.selectors.picker);\n    this.formName = (options.form_name || this.container.dataset.formName || 'images') + ((this.multiple) ? '' : '[]');\n    this.itemTemplate = options.item_template || this.container.dataset.itemTemplate || '<img src=\"{URL}\" />';\n    this.assetBase = options.assetBase || this.container.dataset.assetBase || window.location.origin;\n    this.pluploadUploader = this.createPluploadUploader(options);\n};\n\nUploader.prototype.init = function init () {\n    this.createPresentItems();\n    this.pluploadUploader.init();\n};\n\nUploader.prototype.createPresentItems = function createPresentItems () {\n    var that = this;\n    var items = JSON.parse(this.container.dataset.items || '[]');\n\n    items.forEach(function(url){\n        that.appendItemToContainer(that.createFileItem({\n            id: \"o_\"+Math.random().toString(36).substring(7)\n        }, that.renderItemContent({\n            url: url\n        })));\n    });\n};\n\nUploader.prototype.createFileItem = function createFileItem (file, content) {\n    var item = document.createElement('div');\n    item.id = file.id;\n    item.setAttribute('class', this.selectors.item);\n    item.insertAdjacentHTML('beforeEnd', '<a class=\"'+this.selectors.delete_btn+'\" title=\"删除\">&times;</a>');\n    item.insertAdjacentHTML('beforeEnd', '<div class=\"'+this.selectors.progress_bar+'\"><span></span></div>');\n\n    if (content && content.toString().length) {\n        item.insertAdjacentHTML('beforeEnd', content.toString());\n    }\n\n    return this.attachItemEventListeners(item);\n};\n\nUploader.prototype.renderItemContent = function renderItemContent (data) {\n    var itemHtml = this.itemTemplate;\n    Object.keys(data).forEach(function(key){\n        itemHtml = itemHtml.replace(new RegExp('\\{' + key.toUpperCase() + '\\}', 'g'), data[key]);\n    });\n\n    var relativeUrl = data.relative_url || data.url.replace(this.assetBase.replace(/\\/$/, '') + '/', '');\n\n    itemHtml += '<input type=\"hidden\" name=\"'+this.formName+'\" value=\"'+relativeUrl+'\" />';\n\n    return itemHtml;\n};\n\nUploader.prototype.appendItemToContainer = function appendItemToContainer (item) {\n    this.checkReachMaxItemsLimit();\n\n    var position = this.itemsContainer.querySelector('.'+this.selectors.picker) || null;\n\n    this.itemsContainer.insertBefore(item, position);\n\n    return this.checkReachMaxItemsLimit();\n};\n\nUploader.prototype.removeItemFromContainer = function removeItemFromContainer (item) {\n    this.itemsContainer.removeChild(item);\n\n    return this.checkReachMaxItemsLimit();\n};\n\nUploader.prototype.getFileItem = function getFileItem (file) {\n    return this.itemsContainer.querySelector('#' + file.id);\n};\n\nUploader.prototype.checkReachMaxItemsLimit = function checkReachMaxItemsLimit () {\n    var reached = this.getItemsCount() >= this.maxItems;\n\n    this.picker.style.display = reached ? 'none' : 'inline-block';\n\n    return reached;\n};\n\nUploader.prototype.showItemProgress = function showItemProgress (file) {\n    var progressBar = this.getFileItem(file).querySelector('.'+this.selectors.progress_bar);\n    progressBar.style.display = 'block';\n    progressBar.querySelector('span').style.width = file.percent + '%';\n};\n\nUploader.prototype.showItemError = function showItemError (err) {\n    this.getFileItem(err.file).querySelector('.'+this.selectors.progress_bar).display = 'none';\n\n    var error = document.createElement('div');\n    error.setAttribute('class', this.selectors.error);\n    error.innerHTML = \"Error #\" + err.code + \": \" + err.message;\n\n    this.appendItemToContainer(error);\n};\n\nUploader.prototype.togglePicker = function togglePicker () {\n    if (this.picker.style.display != 'none') {\n        this.picker.style.display = 'block';\n    } else {\n        this.picker.style.display = 'none';\n    }\n};\n\nUploader.prototype.getItemsCount = function getItemsCount () {\n    return this.itemsContainer.querySelectorAll('.'+this.selectors.item).length;\n};\n\nUploader.prototype.attachItemEventListeners = function attachItemEventListeners (item) {\n    var that = this;\n\n    item.querySelector('.'+this.selectors.delete_btn).addEventListener('click', function(){\n        item.parentNode.removeChild(item);\n        that.checkReachMaxItemsLimit();\n    });\n\n    return item;\n};\n\nUploader.prototype.createPluploadUploader = function createPluploadUploader (userOptions) {\n    var options = Object.assign(window.uploader_options, {\n        form_name: this.formName,\n        browse_button: this.picker,\n        filters : {\n            max_file_size : this.container.dataset.maxFileSize || \"2mb\",\n            mime_types: [\n                {\n                    title : this.container.dataset.title || \"Image files\",\n                    extensions : this.container.dataset.extensions || \"jpg,jpeg,gif,png,bmp\"\n                },\n            ]\n        },\n        drop_element: this.picker,\n        multipart_params: {\n            strategy: this.container.dataset.strategy || 'default'\n        },\n        init: this.getPluploadUploaderListeners()\n    }, userOptions || {});\n\n    return new plupload.Uploader(options);\n};\n\nUploader.prototype.getPluploadUploaderListeners = function getPluploadUploaderListeners () {\n    var that = this;\n\n    return {\n        FilesAdded: function(up, files){\n            that.checkReachMaxItemsLimit();\n\n            files = files.slice(0, that.maxItems - that.getItemsCount());\n\n            files.forEach(function(file) {\n                that.appendItemToContainer(that.createFileItem(file));\n            });\n\n            up.start();\n        },\n\n        FileUploaded: function(up, file, result){\n            var response = JSON.parse(result.response);\n            var itemHtml = that.renderItemContent(response);\n\n            that.getFileItem(file).insertAdjacentHTML('beforeEnd', itemHtml);\n            that.getFileItem(file).removeChild(that.getFileItem(file).querySelector('.'+that.selectors.progress_bar));\n        },\n\n        UploadProgress: function(up, file){\n            that.showItemProgress(file);\n        },\n\n        Error: function(up, err){\n            that.showItemError(err);\n        }\n    }\n};\n\nmodule.exports = Uploader;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvcmVzb3VyY2VzL2Fzc2V0cy9qcy91cGxvYWRlci5qcz9lMTdmIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFVwbG9hZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cudXBsb2FkZXJfb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdCYXNlIHVwbG9hZGVyIGNvbmZpZyBcIndpbmRvdy51cGxvYWRlcl9vcHRpb25zXCIgbm90IGZvdW5kLicpO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHtzZWxlY3RvcnM6IHt9fVxuXG4gICAgICAgIHRoaXMuc2VsZWN0b3JzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBwaWNrZXI6ICdmaWxlLXVwbG9hZGVyLXBpY2tlcicsXG4gICAgICAgICAgICBpdGVtczogJ2ZpbGUtdXBsb2FkZXItaXRlbXMnLFxuICAgICAgICAgICAgaXRlbTogJ2ZpbGUtdXBsb2FkZXItaXRlbScsXG4gICAgICAgICAgICBkZWxldGVfYnRuOiAnZmlsZS11cGxvYWRlci1kZWxldGUnLFxuICAgICAgICAgICAgZXJyb3I6ICdmaWxlLXVwbG9hZGVyLWVycm9yJyxcbiAgICAgICAgICAgIHByb2dyZXNzX2JhcjogJ2ZpbGUtdXBsb2FkZXItcHJvZ3Jlc3MtYmFyJyxcbiAgICAgICAgfSwgb3B0aW9ucy5zZWxlY3RvcnMpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICAgICAgICB0aGlzLm1heEl0ZW1zID0gdGhpcy5jb250YWluZXIuZGF0YXNldC5tYXhJdGVtcyB8fCA5OTk7XG4gICAgICAgIHRoaXMubXVsdGlwbGUgPSB0aGlzLmNvbnRhaW5lci5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG4gICAgICAgIHRoaXMuaXRlbXNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyt0aGlzLnNlbGVjdG9ycy5pdGVtcyk7XG4gICAgICAgIHRoaXMucGlja2VyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLicrdGhpcy5zZWxlY3RvcnMucGlja2VyKTtcbiAgICAgICAgdGhpcy5mb3JtTmFtZSA9IChvcHRpb25zLmZvcm1fbmFtZSB8fCB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LmZvcm1OYW1lIHx8ICdpbWFnZXMnKSArICgodGhpcy5tdWx0aXBsZSkgPyAnJyA6ICdbXScpO1xuICAgICAgICB0aGlzLml0ZW1UZW1wbGF0ZSA9IG9wdGlvbnMuaXRlbV90ZW1wbGF0ZSB8fCB0aGlzLmNvbnRhaW5lci5kYXRhc2V0Lml0ZW1UZW1wbGF0ZSB8fCAnPGltZyBzcmM9XCJ7VVJMfVwiIC8+JztcbiAgICAgICAgdGhpcy5hc3NldEJhc2UgPSBvcHRpb25zLmFzc2V0QmFzZSB8fCB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LmFzc2V0QmFzZSB8fCB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuICAgICAgICB0aGlzLnBsdXBsb2FkVXBsb2FkZXIgPSB0aGlzLmNyZWF0ZVBsdXBsb2FkVXBsb2FkZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaW5pdCAoKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlUHJlc2VudEl0ZW1zKCk7XG4gICAgICAgIHRoaXMucGx1cGxvYWRVcGxvYWRlci5pbml0KCk7XG4gICAgfVxuXG4gICAgY3JlYXRlUHJlc2VudEl0ZW1zKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIGxldCBpdGVtcyA9IEpTT04ucGFyc2UodGhpcy5jb250YWluZXIuZGF0YXNldC5pdGVtcyB8fCAnW10nKTtcblxuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKHVybCl7XG4gICAgICAgICAgICB0aGF0LmFwcGVuZEl0ZW1Ub0NvbnRhaW5lcih0aGF0LmNyZWF0ZUZpbGVJdGVtKHtcbiAgICAgICAgICAgICAgICBpZDogXCJvX1wiK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KVxuICAgICAgICAgICAgfSwgdGhhdC5yZW5kZXJJdGVtQ29udGVudCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNyZWF0ZUZpbGVJdGVtKGZpbGUsIGNvbnRlbnQpIHtcbiAgICAgICAgbGV0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaXRlbS5pZCA9IGZpbGUuaWQ7XG4gICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsIHRoaXMuc2VsZWN0b3JzLml0ZW0pO1xuICAgICAgICBpdGVtLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlRW5kJywgJzxhIGNsYXNzPVwiJyt0aGlzLnNlbGVjdG9ycy5kZWxldGVfYnRuKydcIiB0aXRsZT1cIuWIoOmZpFwiPiZ0aW1lczs8L2E+Jyk7XG4gICAgICAgIGl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVFbmQnLCAnPGRpdiBjbGFzcz1cIicrdGhpcy5zZWxlY3RvcnMucHJvZ3Jlc3NfYmFyKydcIj48c3Bhbj48L3NwYW4+PC9kaXY+Jyk7XG5cbiAgICAgICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC50b1N0cmluZygpLmxlbmd0aCkge1xuICAgICAgICAgICAgaXRlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZUVuZCcsIGNvbnRlbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hJdGVtRXZlbnRMaXN0ZW5lcnMoaXRlbSk7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbUNvbnRlbnQoZGF0YSkge1xuICAgICAgICB2YXIgaXRlbUh0bWwgPSB0aGlzLml0ZW1UZW1wbGF0ZTtcbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgaXRlbUh0bWwgPSBpdGVtSHRtbC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xceycgKyBrZXkudG9VcHBlckNhc2UoKSArICdcXH0nLCAnZycpLCBkYXRhW2tleV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgcmVsYXRpdmVVcmwgPSBkYXRhLnJlbGF0aXZlX3VybCB8fCBkYXRhLnVybC5yZXBsYWNlKHRoaXMuYXNzZXRCYXNlLnJlcGxhY2UoL1xcLyQvLCAnJykgKyAnLycsICcnKTtcblxuICAgICAgICBpdGVtSHRtbCArPSAnPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiJyt0aGlzLmZvcm1OYW1lKydcIiB2YWx1ZT1cIicrcmVsYXRpdmVVcmwrJ1wiIC8+JztcblxuICAgICAgICByZXR1cm4gaXRlbUh0bWw7XG4gICAgfVxuXG4gICAgYXBwZW5kSXRlbVRvQ29udGFpbmVyKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5jaGVja1JlYWNoTWF4SXRlbXNMaW1pdCgpO1xuXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuaXRlbXNDb250YWluZXIucXVlcnlTZWxlY3RvcignLicrdGhpcy5zZWxlY3RvcnMucGlja2VyKSB8fCBudWxsO1xuXG4gICAgICAgIHRoaXMuaXRlbXNDb250YWluZXIuaW5zZXJ0QmVmb3JlKGl0ZW0sIHBvc2l0aW9uKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jaGVja1JlYWNoTWF4SXRlbXNMaW1pdCgpO1xuICAgIH1cblxuICAgIHJlbW92ZUl0ZW1Gcm9tQ29udGFpbmVyKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5pdGVtc0NvbnRhaW5lci5yZW1vdmVDaGlsZChpdGVtKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jaGVja1JlYWNoTWF4SXRlbXNMaW1pdCgpO1xuICAgIH1cblxuICAgIGdldEZpbGVJdGVtKGZpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNDb250YWluZXIucXVlcnlTZWxlY3RvcignIycgKyBmaWxlLmlkKTtcbiAgICB9XG5cbiAgICBjaGVja1JlYWNoTWF4SXRlbXNMaW1pdCgpIHtcbiAgICAgICAgbGV0IHJlYWNoZWQgPSB0aGlzLmdldEl0ZW1zQ291bnQoKSA+PSB0aGlzLm1heEl0ZW1zO1xuXG4gICAgICAgIHRoaXMucGlja2VyLnN0eWxlLmRpc3BsYXkgPSByZWFjaGVkID8gJ25vbmUnIDogJ2lubGluZS1ibG9jayc7XG5cbiAgICAgICAgcmV0dXJuIHJlYWNoZWQ7XG4gICAgfVxuXG4gICAgc2hvd0l0ZW1Qcm9ncmVzcyhmaWxlKSB7XG4gICAgICAgIGxldCBwcm9ncmVzc0JhciA9IHRoaXMuZ2V0RmlsZUl0ZW0oZmlsZSkucXVlcnlTZWxlY3RvcignLicrdGhpcy5zZWxlY3RvcnMucHJvZ3Jlc3NfYmFyKTtcbiAgICAgICAgcHJvZ3Jlc3NCYXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHByb2dyZXNzQmFyLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5zdHlsZS53aWR0aCA9IGZpbGUucGVyY2VudCArICclJztcbiAgICB9XG5cbiAgICBzaG93SXRlbUVycm9yKGVycikge1xuICAgICAgICB0aGlzLmdldEZpbGVJdGVtKGVyci5maWxlKS5xdWVyeVNlbGVjdG9yKCcuJyt0aGlzLnNlbGVjdG9ycy5wcm9ncmVzc19iYXIpLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgbGV0IGVycm9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVycm9yLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0aGlzLnNlbGVjdG9ycy5lcnJvcik7XG4gICAgICAgIGVycm9yLmlubmVySFRNTCA9IFwiRXJyb3IgI1wiICsgZXJyLmNvZGUgKyBcIjogXCIgKyBlcnIubWVzc2FnZTtcblxuICAgICAgICB0aGlzLmFwcGVuZEl0ZW1Ub0NvbnRhaW5lcihlcnJvcik7XG4gICAgfVxuXG4gICAgdG9nZ2xlUGlja2VyKCkge1xuICAgICAgICBpZiAodGhpcy5waWNrZXIuc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEl0ZW1zQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nK3RoaXMuc2VsZWN0b3JzLml0ZW0pLmxlbmd0aDtcbiAgICB9XG5cbiAgICBhdHRhY2hJdGVtRXZlbnRMaXN0ZW5lcnMoaXRlbSkge1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgaXRlbS5xdWVyeVNlbGVjdG9yKCcuJyt0aGlzLnNlbGVjdG9ycy5kZWxldGVfYnRuKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgICB0aGF0LmNoZWNrUmVhY2hNYXhJdGVtc0xpbWl0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIGNyZWF0ZVBsdXBsb2FkVXBsb2FkZXIodXNlck9wdGlvbnMpIHtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHdpbmRvdy51cGxvYWRlcl9vcHRpb25zLCB7XG4gICAgICAgICAgICBmb3JtX25hbWU6IHRoaXMuZm9ybU5hbWUsXG4gICAgICAgICAgICBicm93c2VfYnV0dG9uOiB0aGlzLnBpY2tlcixcbiAgICAgICAgICAgIGZpbHRlcnMgOiB7XG4gICAgICAgICAgICAgICAgbWF4X2ZpbGVfc2l6ZSA6IHRoaXMuY29udGFpbmVyLmRhdGFzZXQubWF4RmlsZVNpemUgfHwgXCIybWJcIixcbiAgICAgICAgICAgICAgICBtaW1lX3R5cGVzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlIDogdGhpcy5jb250YWluZXIuZGF0YXNldC50aXRsZSB8fCBcIkltYWdlIGZpbGVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zIDogdGhpcy5jb250YWluZXIuZGF0YXNldC5leHRlbnNpb25zIHx8IFwianBnLGpwZWcsZ2lmLHBuZyxibXBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkcm9wX2VsZW1lbnQ6IHRoaXMucGlja2VyLFxuICAgICAgICAgICAgbXVsdGlwYXJ0X3BhcmFtczoge1xuICAgICAgICAgICAgICAgIHN0cmF0ZWd5OiB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LnN0cmF0ZWd5IHx8ICdkZWZhdWx0J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGluaXQ6IHRoaXMuZ2V0UGx1cGxvYWRVcGxvYWRlckxpc3RlbmVycygpXG4gICAgICAgIH0sIHVzZXJPcHRpb25zIHx8IHt9KTtcblxuICAgICAgICByZXR1cm4gbmV3IHBsdXBsb2FkLlVwbG9hZGVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGdldFBsdXBsb2FkVXBsb2FkZXJMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgRmlsZXNBZGRlZDogZnVuY3Rpb24odXAsIGZpbGVzKXtcbiAgICAgICAgICAgICAgICB0aGF0LmNoZWNrUmVhY2hNYXhJdGVtc0xpbWl0KCk7XG5cbiAgICAgICAgICAgICAgICBmaWxlcyA9IGZpbGVzLnNsaWNlKDAsIHRoYXQubWF4SXRlbXMgLSB0aGF0LmdldEl0ZW1zQ291bnQoKSk7XG5cbiAgICAgICAgICAgICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcHBlbmRJdGVtVG9Db250YWluZXIodGhhdC5jcmVhdGVGaWxlSXRlbShmaWxlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB1cC5zdGFydCgpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgRmlsZVVwbG9hZGVkOiBmdW5jdGlvbih1cCwgZmlsZSwgcmVzdWx0KXtcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3VsdC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1IdG1sID0gdGhhdC5yZW5kZXJJdGVtQ29udGVudChyZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICB0aGF0LmdldEZpbGVJdGVtKGZpbGUpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlRW5kJywgaXRlbUh0bWwpO1xuICAgICAgICAgICAgICAgIHRoYXQuZ2V0RmlsZUl0ZW0oZmlsZSkucmVtb3ZlQ2hpbGQodGhhdC5nZXRGaWxlSXRlbShmaWxlKS5xdWVyeVNlbGVjdG9yKCcuJyt0aGF0LnNlbGVjdG9ycy5wcm9ncmVzc19iYXIpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIFVwbG9hZFByb2dyZXNzOiBmdW5jdGlvbih1cCwgZmlsZSl7XG4gICAgICAgICAgICAgICAgdGhhdC5zaG93SXRlbVByb2dyZXNzKGZpbGUpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgRXJyb3I6IGZ1bmN0aW9uKHVwLCBlcnIpe1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvd0l0ZW1FcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFVwbG9hZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvcmVzb3VyY2VzL2Fzc2V0cy9qcy91cGxvYWRlci5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }
/******/ ]);